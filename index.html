<!DOCTYPE html>
<html lang="zh-CN">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>AIC-RTVSTï½œå®æ—¶è§†é¢‘è¯­ä¹‰ä¼ è¾“å¯¹æ¯”æ¼”ç¤º</title>
Â  Â  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css ">
Â  Â  <style>
Â  Â  Â  Â  /* ====== å…¨é¡µé€šç”¨æ ·å¼ ====== */
Â  Â  Â  Â  *{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif}
Â  Â  Â  Â  body{background:linear-gradient(135deg,#a1c4fd,#c2e9fb,#e0f7fa);color:#333;min-height:100vh}
Â  Â  Â  Â  .container{max-width:1800px;margin:0 auto;padding:10px}
Â  Â  Â  Â  header{text-align:center;padding:30px 0}
Â  Â  Â  Â  h1{font-size:2.8rem;margin-bottom:10px;text-shadow:2px 2px 4px rgba(0,0,0,.3)}
Â  Â  Â  Â  .subtitle{font-size:1.2rem;opacity:.9;max-width:800px;margin:0 auto;line-height:1.6}
Â  Â  Â  Â  .global-controls{background:rgba(255,255,255,.1);backdrop-filter:blur(10px);border-radius:15px;padding:20px;margin:30px 0;text-align:center}
Â  Â  Â  Â  .info-display-row{display:flex;justify-content:space-around;align-items:center;border:2px solid #ccc;border-radius:8px;padding:10px 0;margin:10px 0;background:rgba(255,255,255,.1);color:#000}
Â  Â  Â  Â  .info-display-item{text-align:center;padding:5px 15px}
Â  Â  Â  Â  .info-label{font-weight:bold;font-size:18px;color:#fff;margin-right:5px}
Â  Â  Â  Â  .info-value{font-size:20px;color:#fdbb2d;font-weight:600}
Â  Â  Â  Â  .performance-charts{background:rgba(255,255,255,.1);backdrop-filter:blur(10px);border-radius:15px;padding:25px;margin:30px 0;box-shadow:0 10px 30px rgba(0,0,0,.2)}
Â  Â  Â  Â  .charts-title{font-size:1.5rem;margin-bottom:20px;color:#fdbb2d;display:flex;align-items:center;gap:10px;justify-content:center}
Â  Â  Â  Â  .charts-container{display:grid;grid-template-columns:repeat(3,1fr);gap:20px}
Â  Â  Â  Â  .chart-item{background:rgba(255,255,255,.05);border-radius:10px;padding:15px;text-align:center;border:1px solid rgba(255,255,255,.1)}
Â  Â  Â  Â  .chart-item img{width:100%;height:200px;object-fit:contain;background:rgba(0,0,0,.2);border-radius:8px;padding:10px}
Â  Â  Â  Â  .chart-label{margin-top:10px;color:#fdbb2d;font-weight:500;font-size:1rem}
Â  Â  Â  Â  .architecture-image{text-align:center;margin:25px 0;background:rgba(255,255,255,.08);backdrop-filter:blur(10px);border-radius:12px;padding:25px;border:1px solid rgba(253,187,45,.3);box-shadow:0 8px 25px rgba(0,0,0,.2)}
Â  Â  Â  Â  .architecture-image img{max-width:90%;max-height:450px;object-fit:contain;border-radius:8px;border:1px solid rgba(255,255,255,.2);transition:transform .3s}
Â  Â  Â  Â  .architecture-image img:hover{transform:scale(1.02)}
Â  Â  Â  Â  .image-caption{margin-top:15px;color:#fdbb2d;font-weight:500;font-size:1rem}
Â  Â  Â  Â  .video-container{display:grid;grid-template-columns:repeat(4,1fr);gap:20px;margin-top:30px}
Â  Â  Â  Â  .video-panel{background:rgba(255,255,255,.1);backdrop-filter:blur(10px);border-radius:15px;padding:15px;box-shadow:0 10px 30px rgba(0,0,0,.2);display:flex;flex-direction:column;min-width:0}
Â  Â  Â  Â  .panel-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid rgba(255,255,255,.2)}
Â  Â  Â  Â  .panel-title{font-size:1.2rem;display:flex;align-items:center;gap:8px}
Â  Â  Â  Â  .panel-title i{color:#fdbb2d}
        /* ğŸš€ å…³é”® CSS æ”¹å˜ï¼šä¸ºå¹³æ»‘åˆ‡æ¢åšå‡†å¤‡ */
Â  Â  Â  Â  .display-area{
            position: relative; /* ç¡®ä¿å­å…ƒç´  img çš„ç»å¯¹å®šä½æ˜¯ç›¸å¯¹äºæ­¤å®¹å™¨ */
            width:100%;height:200px;border:2px solid rgba(255,255,255,.2);border-radius:10px;
            display:flex;align-items:center;justify-content:center;
            background:rgba(0,0,0,.3);overflow:hidden;margin-bottom:12px
        }
Â  Â  Â  Â  .display-area img{
            position: absolute; /* ç»å¯¹å®šä½è®©å›¾ç‰‡å åŠ  */
            top: 0;
            left: 0;
            max-width:100%;max-height:100%;object-fit:contain
        }
        /* ğŸš€ */
Â  Â  Â  Â  .controls{display:flex;flex-wrap:wrap;gap:8px;margin:12px 0;justify-content:center}
Â  Â  Â  Â  .info-panel{background:rgba(0,0,0,.2);padding:10px;border-radius:8px;margin-top:8px;font-size:.8rem}
Â  Â  Â  Â  .info-item{display:flex;justify-content:space-between;margin-bottom:4px}
Â  Â  Â  Â  .status-indicator{display:inline-block;width:8px;height:8px;border-radius:50%;margin-right:6px}
Â  Â  Â  Â  .status-playing{background:#4CAF50;animation:pulse 1s infinite}
Â  Â  Â  Â  .status-paused{background:#ff9800}
Â  Â  Â  Â  .status-stopped{background:#f44336}
Â  Â  Â  Â  @keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}
Â  Â  Â  Â  footer{text-align:center;margin-top:50px;padding:20px;opacity:.7;font-size:.9rem}
Â  Â  Â  Â  .btn{background:#fdbb2d;color:#1a1a2e;border:none;padding:8px 16px;border-radius:50px;font-weight:bold;cursor:pointer;transition:all .3s;display:inline-flex;align-items:center;gap:6px;margin:4px;font-size:.85rem}
Â  Â  Â  Â  .btn:hover{background:#ffcc44;transform:scale(1.05)}
Â  Â  Â  Â  .btn-global{background:#4CAF50;padding:10px 20px;font-size:.95rem}
Â  Â  Â  Â  .btn-global:hover{background:#66BB6A}
Â  Â  Â  Â  .btn-stop{background:#f44336}
Â  Â  Â  Â  .btn-stop:hover{background:#ef5350}
Â  Â  Â  Â  @media(max-width:1400px){.video-container{grid-template-columns:repeat(2,1fr)}}
Â  Â  Â  Â  @media(max-width:768px){.video-container{grid-template-columns:1fr}h1{font-size:2.2rem}}
Â  Â  Â  Â  .abstract{background:rgba(255,255,255,.08);padding:20px;border-radius:10px;line-height:1.8;border-left:4px solid #fdbb2d;color:#fff;}
Â  Â  Â  Â  .abstract strong{color:#fdbb2d;font-weight:600;}
Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  </style>
</head>
<body>
Â  Â  <div class="container">
Â  Â  Â  Â  <header>
Â  Â  Â  Â  Â  Â  <h1>AIC-RTVST</h1>
Â  Â  Â  Â  Â  Â  <p class="subtitle">å®æ—¶è§†é¢‘è¯­ä¹‰ä¼ è¾“å¯¹æ¯”æ¼”ç¤ºå¹³å°</p>
Â  Â  Â  Â  </header>

Â  Â  Â  Â  <div class="global-controls">
Â  Â  Â  Â  Â  Â  <div class="info-display-row">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="info-display-item"><span class="info-label">SNR:</span><span class="info-value">8 dB</span></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="info-display-item"><span class="info-label">CBR:</span><span class="info-value">0.012</span></div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="abstract" style="margin-bottom:20px;">
Â  Â  Â  Â  Â  Â  Â  <strong>é¡¹ç›®æ‘˜è¦ï¼š</strong>
Â  Â  Â  Â  Â  Â  Â  æœ¬ å›¢ é˜Ÿ æ å‡º äº† ä¸€ ç§ å® æ—¶ è§† é¢‘ è¯­ ä¹‰ ä¼  è¾“ ç³» ç»Ÿ ï¼ˆ Real-time Video SemanticÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Transmissionï¼ŒRTVSTï¼‰ã€‚æå‡ºäº†éšå¼æ—¶æ€å»ºæ¨¡åŠè·¨é€šé“ä¿¡æ¯ç»“æ„åŒ–åˆ†è§£ä¸é‡æ„æ–¹æ³•ï¼Œå°†ä¼ ç»Ÿè¿åŠ¨ä¼°è®¡å’Œæ®‹å·®é“¾è·¯èåˆä¸ºç»Ÿä¸€çš„å‰å‘è¿‡ç¨‹ï¼Œ
Â  Â  Â  Â  Â  Â  Â  Â  å¹¶åœ¨ç´§è‡´ç‰¹å¾ç©ºé—´ä¸­æ‰§è¡Œç‰¹å¾æå–æ“ä½œï¼Œä»è€Œå¤§å¹…é™ä½æ“ä½œå¤æ‚åº¦ï¼Œæ˜¾è‘—æå‡å•å¸§
Â  Â  Â  Â  Â  Â  Â  Â  ç¼–è§£ç é€Ÿåº¦ã€‚æ­¤å¤–ï¼Œè¯¥ç®—æ³•é€šè¿‡ç«¯åˆ°ç«¯è”åˆä¼˜åŒ–ï¼Œä¿è¯é«˜è´¨é‡é‡å»ºæ•ˆæœçš„åŒæ—¶å…·æœ‰
Â  Â  Â  Â  Â  Â  Â  Â  è¾ƒå¥½çš„å™ªå£°é²æ£’æ€§ã€‚RTVSTç›´å‡»è¯­ä¹‰è§†é¢‘ä¼ è¾“å®æ—¶æ€§ç—›ç‚¹ï¼Œæœ‰æœ›ä¸ºé«˜å¸¦å®½ã€ä½æ—¶å»¶
Â  Â  Â  Â  Â  Â  Â  Â  çš„æœªæ¥æµåª’ä½“ä¸šåŠ¡æä¾›æ–¹æ³•æ”¯æ’‘ï¼Œæ¨åŠ¨è¯­ä¹‰é€šä¿¡ä»ç†è®ºç ”ç©¶èµ°å‘å®é™…éƒ¨ç½²ã€‚æœ¬ é¡¹ ç›®å°†DeepJSCCä¸H.265+1/3LDPC+16QAMä¼ ç»Ÿè§†é¢‘ä¼ è¾“ç³»
Â  Â  Â  Â  Â  Â  Â  Â  ç»Ÿä½œä¸ºå¯¹æ¯”æ–¹æ¡ˆã€‚
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <div class="architecture-image">
Â  Â  Â  Â  Â  Â  Â  Â  <img src="https://rtvst-demo.github.io/video-transmission-demo/rtvst_Architecture.jpg " alt="RTVSTæ¶æ„å›¾">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="image-caption">RTVSTæ¨¡å‹æ¶æ„å›¾</div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="controls">
Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-global" id="globalPlay"><i class="fas fa-play"></i> å¼€å§‹</button>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-global" id="globalPause"><i class="fas fa-pause"></i> æš‚åœ</button>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-global btn-stop" id="globalStop"><i class="fas fa-stop"></i> åœæ­¢</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="performance-charts">
Â  Â  Â  Â  Â  Â  <div class="charts-title"><i class="fas fa-chart-line"></i> æ€§èƒ½æŒ‡æ ‡å¯¹æ¯”æ›²çº¿</div>
Â  Â  Â  Â  Â  Â  <div class="charts-container">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="chart-item"><img src="https://rtvst-demo.github.io/video-transmission-demo/images_metrics/psnr.svg " alt="PSNR"><div class="chart-label">PSNRæ€§èƒ½å¯¹æ¯”</div></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="chart-item"><img src="https://rtvst-demo.github.io/video-transmission-demo/images_metrics/ssim.svg " alt="SSIM"><div class="chart-label">SSIMæ€§èƒ½å¯¹æ¯”</div></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="chart-item"><img src="https://rtvst-demo.github.io/video-transmission-demo/images_metrics/lpips.svg " alt="LPIPS"><div class="chart-label">LPIPSæ€§èƒ½å¯¹æ¯”</div></div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="video-container">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="video-panel">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="panel-header"><h3 class="panel-title"><i class="fas fa-film"></i> Origin</h3><span class="status-indicator status-stopped" id="st4"></span></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="display-area" id="da4"></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="info-panel">
                    <div class="info-item"><span>å½“å‰å¸§:</span><span id="cf4">1 / 100</span></div>
                    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="info-item"><span>å¸§ç‡:</span><span id="fps4">25 FPS</span></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="info-item"><span>çŠ¶æ€:</span><span id="ps4">å·²åœæ­¢</span></div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="video-panel">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="panel-header"><h3 class="panel-title"><i class="fas fa-film"></i> H.265 + LDPCÂ </h3><span class="status-indicator status-stopped" id="st1"></span></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="display-area" id="da1"></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="info-panel">
                    <div class="info-item"><span>å½“å‰å¸§:</span><span id="cf1">1 / 100</span></div>
                    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="info-item"><span>å¸§ç‡:</span><span id="fps1">25 FPS</span></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="info-item"><span>çŠ¶æ€:</span><span id="ps1">å·²åœæ­¢</span></div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="video-panel">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="panel-header"><h3 class="panel-title"><i class="fas fa-film"></i> DeepJSCC</h3><span class="status-indicator status-stopped" id="st2"></span></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="display-area" id="da2"></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="info-panel">
                    <div class="info-item"><span>å½“å‰å¸§:</span><span id="cf2">1 / 100</span></div>
                    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="info-item"><span>å¸§ç‡:</span><span id="fps2">4 FPS</span></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="info-item"><span>çŠ¶æ€:</span><span id="ps2">å·²åœæ­¢</span></div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="video-panel">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="panel-header"><h3 class="panel-title"><i class="fas fa-film"></i> RTVST</h3><span class="status-indicator status-stopped" id="st3"></span></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="display-area" id="da3"></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="info-panel">
                    <div class="info-item"><span>å½“å‰å¸§:</span><span id="cf3">1 / 100</span></div>
                    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="info-item"><span>å¸§ç‡:</span><span id="fps3">25 FPS</span></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="info-item"><span>çŠ¶æ€:</span><span id="ps3">å·²åœæ­¢</span></div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <footer><p>å®æ—¶è§†é¢‘è¯­ä¹‰ä¼ è¾“ç®—æ³•è®¾è®¡</p></footer>
Â  Â  </div>

Â  Â  Â  Â  <script>
Â  Â  /* ================= ç”Ÿæˆå››è·¯è§†é¢‘å¸§ ================= */
Â  Â  const repo = 'https://rtvst-demo.github.io/video-transmission-demo';Â  Â 
Â  Â Â 
Â  Â  const panels = [
Â  Â  Â  { id: 'da4', prefixId: 4, folder: 'origin-frames',Â  Â  Â tpl: i => `img${String(i).padStart(6,'0')}.png`,Â  Â  Â  Â count: 100, fps: 25 },
Â  Â  Â  { id: 'da1', prefixId: 1, folder: 'h265+ldpc-frames',Â  tpl: i => `output_${String(i).padStart(4,'0')}.png`,Â  Â count: 100, fps: 25 },
Â  Â  Â  { id: 'da2', prefixId: 2, folder: 'deepjscc-frames',Â  Â tpl: i => `${100+i-1}recon_snr8.png`,Â  Â  Â  Â  Â  Â  Â  Â  Â  count: 100, fps: 4 },
Â  Â  Â  { id: 'da3', prefixId: 3, folder: 'rtvst-frames',Â  Â  Â  tpl: i => `${i-1}recon_snr8.png`,Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  count: 100, fps: 25 }
Â  Â  ];
Â  Â Â 
Â  Â  panels.forEach(p=>{
Â  Â  Â  const box = document.getElementById(p.id);
Â  Â  Â  let html = '';
Â  Â  Â  for(let i=1;i<=p.count;i++){
Â  Â  Â  Â  const fileName = p.tpl(i);
Â  Â  Â  Â  const src = `${repo}/${p.folder}/${fileName}`;
Â  Â  Â  Â  // ç¡®ä¿å›¾ç‰‡ä½¿ç”¨äº†ç»å¯¹å®šä½ï¼Œå¹¶ä¸”åªæœ‰ç¬¬ä¸€å¸§å¯è§
Â  Â  Â  Â  html += `<img id="${p.id}-frame-${i}" src="${src}" style="max-width:100%;max-height:100%;object-fit:contain;position:absolute;${i===1?'':'display:none'}" />`;
Â  Â  Â  }
Â  Â  Â  box.innerHTML = html;
Â  Â  });
Â  Â Â 
Â  Â  /* ================= ğŸš€ æ’­æ”¾å™¨ (æ— é—ªçƒä¼˜åŒ–) ================= */
Â  Â  function flipper(prefix, total, interval, statusEl, curEl){
Â  Â  Â  let idx = 0; 
Â  Â  Â  let t = null;
Â  Â  Â  let isPlaying = false; // è·Ÿè¸ªæ˜¯å¦å¤„äºæ’­æ”¾çŠ¶æ€
Â  Â  Â Â 
Â  Â  Â  // éšè—æ‰€æœ‰å¸§ï¼Œæ˜¾ç¤ºæŒ‡å®šç´¢å¼•çš„å¸§
Â  Â  Â  const showFrame = (k)=>{
Â  Â  Â  Â  document.querySelectorAll(`#${prefix} img`).forEach(el=>el.style.display='none');
Â  Â  Â  Â  const target = document.getElementById(`${prefix}-frame-${k+1}`);
Â  Â  Â  Â  if(target) target.style.display='block';
Â  Â  Â  Â  if(curEl) curEl.textContent = `${k+1} / ${total}`;Â  Â 
Â  Â  Â  };
Â  Â  Â  
Â  Â  Â  // æ ¸å¿ƒåˆ‡æ¢é€»è¾‘ï¼šå°è¯•åˆ‡æ¢åˆ°ä¸‹ä¸€å¸§
Â  Â  Â  const tryNextFrame = () => {
Â  Â  Â  Â  if (!isPlaying) return;
Â  Â  Â  Â Â 
Â  Â  Â  Â  const nextIdx = (idx + 1) % total;
Â  Â  Â  Â  const currentFrameEl = document.getElementById(`${prefix}-frame-${idx + 1}`);
Â  Â  Â  Â  const nextFrameEl = document.getElementById(`${prefix}-frame-${nextIdx + 1}`);

Â  Â  Â  Â  if (!nextFrameEl) {
Â  Â  Â  Â  Â  // å¦‚æœæ²¡æœ‰ä¸‹ä¸€å¸§ï¼Œåˆ™ä¿æŒå½“å‰å¸§å¹¶åœæ­¢ï¼ˆæˆ–å¾ªç¯ï¼‰
Â  Â  Â  Â  Â  if (statusEl) {
Â  Â  Â  Â  Â  Â  statusEl.textContent = 'å·²åœæ­¢';
Â  Â  Â  Â  Â  Â  statusEl.previousElementSibling.className = 'status-indicator status-stopped';
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }

Â  Â  Â  Â  if (nextFrameEl.complete) {
Â  Â  Â  Â  Â  // 1. **å·²åŠ è½½:** ç›´æ¥åˆ‡æ¢åˆ°ä¸‹ä¸€å¸§
Â  Â  Â  Â  Â  if (currentFrameEl) currentFrameEl.style.display = 'none';
Â  Â  Â  Â  Â  nextFrameEl.style.display = 'block';
Â  Â  Â  Â  Â  idx = nextIdx;
Â  Â  Â  Â  Â  if (curEl) curEl.textContent = `${idx + 1} / ${total}`;
Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  // ç»§ç»­æ’­æ”¾ï¼ˆé€’å½’è°ƒç”¨æˆ–è®¾ç½®ä¸‹ä¸€ä¸ªå®šæ—¶å™¨ï¼‰
Â  Â  Â  Â  Â  t = setTimeout(tryNextFrame, interval);

Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  // 2. **æœªåŠ è½½:** ä¿æŒå½“å‰å¸§ï¼Œå¹¶ç­‰å¾…ä¸‹ä¸€å¸§åŠ è½½å®Œæˆ
Â  Â  Â  Â  Â  if (statusEl) statusEl.textContent = 'åŠ è½½ä¸­...'; // æç¤ºæ­£åœ¨åŠ è½½
Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  // ç»‘å®š onload äº‹ä»¶ï¼ŒåŠ è½½å®Œæˆåç»§ç»­æ’­æ”¾
Â  Â  Â  Â  Â  nextFrameEl.onload = nextFrameEl.onerror = () => {
Â  Â  Â  Â  Â  Â  if (!isPlaying) return; // å¦‚æœåœ¨åŠ è½½è¿‡ç¨‹ä¸­è¢«æš‚åœæˆ–åœæ­¢ï¼Œåˆ™ä¸ç»§ç»­
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // åˆ‡æ¢åˆ°æ–°åŠ è½½çš„å¸§
Â  Â  Â  Â  Â  Â  if (currentFrameEl) currentFrameEl.style.display = 'none';
Â  Â  Â  Â  Â  Â  nextFrameEl.style.display = 'block';
Â  Â  Â  Â  Â  Â  idx = nextIdx;
Â  Â  Â  Â  Â  Â  if (curEl) curEl.textContent = `${idx + 1} / ${total}`;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (statusEl) { 
Â  Â  Â  Â  Â  Â  Â  statusEl.textContent = 'æ’­æ”¾ä¸­';
Â  Â  Â  Â  Â  Â  Â  statusEl.previousElementSibling.className = 'status-indicator status-playing';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  // è®¾ç½®ä¸‹ä¸€ä¸ªåˆ‡æ¢çš„å®šæ—¶å™¨
Â  Â  Â  Â  Â  Â  t = setTimeout(tryNextFrame, interval);
Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  // ç¡®ä¿è§¦å‘åŠ è½½
Â  Â  Â  Â  Â  if (!nextFrameEl.src) nextFrameEl.src = nextFrameEl.src;
Â  Â  Â  Â  }
Â  Â  Â  };


Â  Â  Â  showFrame(0);Â  Â // åˆå§‹åŒ–æ˜¾ç¤ºç¬¬ä¸€å¼ 
Â  Â  Â  
Â  Â  Â  return {
Â  Â  Â  Â  start(){
Â  Â  Â  Â  Â  if(isPlaying) return;
Â  Â  Â  Â  Â  isPlaying = true;
Â  Â  Â  Â  Â  if(statusEl){ 
Â  Â  Â  Â  Â  Â  statusEl.textContent='æ’­æ”¾ä¸­'; 
Â  Â  Â  Â  Â  Â  statusEl.previousElementSibling.className='status-indicator status-playing'; 
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  // å¯åŠ¨æ—¶ï¼Œç«‹å³å°è¯•åŠ è½½ä¸‹ä¸€å¸§
Â  Â  Â  Â  Â  tryNextFrame(); 
Â  Â  Â  Â  },
Â  Â  Â  Â  pause(){
Â  Â  Â  Â  Â  clearTimeout(t); 
Â  Â  Â  Â  Â  t=null;
Â  Â  Â  Â  Â  isPlaying = false;
Â  Â  Â  Â  Â  if(statusEl){ 
Â  Â  Â  Â  Â  Â  statusEl.textContent='å·²æš‚åœ'; 
Â  Â  Â  Â  Â  Â  statusEl.previousElementSibling.className='status-indicator status-paused'; 
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  },
Â  Â  Â  Â  stop(){
Â  Â  Â  Â  Â  clearTimeout(t); 
Â  Â  Â  Â  Â  t=null; 
Â  Â  Â  Â  Â  isPlaying = false;
Â  Â  Â  Â  Â  idx=0; 
Â  Â  Â  Â  Â  showFrame(0); // åœæ­¢æ—¶ï¼Œæ˜¾ç¤ºç¬¬ä¸€å¸§
Â  Â  Â  Â  Â  if(statusEl){ 
Â  Â  Â  Â  Â  Â  statusEl.textContent='å·²åœæ­¢'; 
Â  Â  Â  Â  Â  Â  statusEl.previousElementSibling.className='status-indicator status-stopped'; 
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  };
Â  Â  }
Â  Â Â 
Â  Â  /* ================= å››è·¯å®ä¾‹ ================= */
Â  Â  const players = panels.map((p)=>
Â  Â  Â  flipper(p.id, p.count, 1000/p.fps,
Â  Â  Â  Â  Â  Â  Â  document.getElementById(`ps${p.prefixId}`),
Â  Â  Â  Â  Â  Â  Â  document.getElementById(`cf${p.prefixId}`))
Â  Â  );
Â  Â Â 
Â  Â  /* ================= å…¨å±€æŒ‰é’® ================= */
Â  Â  document.getElementById('globalPlay').addEventListener('click',()=>players.forEach(p=>p.start()));
Â  Â  document.getElementById('globalPause').addEventListener('click',()=>players.forEach(p=>p.pause()));
Â  Â  document.getElementById('globalStop').addEventListener('click',()=>players.forEach(p=>p.stop()));
Â  Â  </script>

</body>
</html>
