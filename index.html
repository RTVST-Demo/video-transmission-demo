<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIC-RTVSTï½œå®æ—¶è§†é¢‘è¯­ä¹‰ä¼ è¾“å¯¹æ¯”æ¼”ç¤º</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css ">
    <style>
        /* ====== å…¨é¡µé€šç”¨æ ·å¼ ====== */
        *{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif}
        body{background:linear-gradient(135deg,#a1c4fd,#c2e9fb,#e0f7fa);color:#333;min-height:100vh}
        .container{max-width:1800px;margin:0 auto;padding:10px}
        header{text-align:center;padding:30px 0}
        h1{font-size:2.8rem;margin-bottom:10px;text-shadow:2px 2px 4px rgba(0,0,0,.3)}
        .subtitle{font-size:1.2rem;opacity:.9;max-width:800px;margin:0 auto;line-height:1.6}
        .global-controls{background:rgba(255,255,255,.1);backdrop-filter:blur(10px);border-radius:15px;padding:20px;margin:30px 0;text-align:center}
        .info-display-row{display:flex;justify-content:space-around;align-items:center;border:2px solid #ccc;border-radius:8px;padding:10px 0;margin:10px 0;background:rgba(255,255,255,.1);color:#000}
        .info-display-item{text-align:center;padding:5px 15px}
        .info-label{font-weight:bold;font-size:18px;color:#fff;margin-right:5px}
        .info-value{font-size:20px;color:#fdbb2d;font-weight:600}
        .performance-charts{background:rgba(255,255,255,.1);backdrop-filter:blur(10px);border-radius:15px;padding:25px;margin:30px 0;box-shadow:0 10px 30px rgba(0,0,0,.2)}
        .charts-title{font-size:1.5rem;margin-bottom:20px;color:#fdbb2d;display:flex;align-items:center;gap:10px;justify-content:center}
        .charts-container{display:grid;grid-template-columns:repeat(3,1fr);gap:20px}
        .chart-item{background:rgba(255,255,255,.05);border-radius:10px;padding:15px;text-align:center;border:1px solid rgba(255,255,255,.1)}
        .chart-item img{width:100%;height:200px;object-fit:contain;background:rgba(0,0,0,.2);border-radius:8px;padding:10px}
        .chart-label{margin-top:10px;color:#fdbb2d;font-weight:500;font-size:1rem}
        .architecture-image{text-align:center;margin:25px 0;background:rgba(255,255,255,.08);backdrop-filter:blur(10px);border-radius:12px;padding:25px;border:1px solid rgba(253,187,45,.3);box-shadow:0 8px 25px rgba(0,0,0,.2)}
        .architecture-image img{max-width:90%;max-height:450px;object-fit:contain;border-radius:8px;border:1px solid rgba(255,255,255,.2);transition:transform .3s}
        .architecture-image img:hover{transform:scale(1.02)}
        .image-caption{margin-top:15px;color:#fdbb2d;font-weight:500;font-size:1rem}
        .video-container{display:grid;grid-template-columns:repeat(4,1fr);gap:20px;margin-top:30px}
        .video-panel{background:rgba(255,255,255,.1);backdrop-filter:blur(10px);border-radius:15px;padding:15px;box-shadow:0 10px 30px rgba(0,0,0,.2);display:flex;flex-direction:column;min-width:0}
        .panel-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid rgba(255,255,255,.2)}
        .panel-title{font-size:1.2rem;display:flex;align-items:center;gap:8px}
        .panel-title i{color:#fdbb2d}
        .display-area{width:100%;height:200px;border:2px solid rgba(255,255,255,.2);border-radius:10px;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.3);overflow:hidden;margin-bottom:12px}
        .display-area img{max-width:100%;max-height:100%;object-fit:contain}
        .controls{display:flex;flex-wrap:wrap;gap:8px;margin:12px 0;justify-content:center}
        .info-panel{background:rgba(0,0,0,.2);padding:10px;border-radius:8px;margin-top:8px;font-size:.8rem}
        .info-item{display:flex;justify-content:space-between;margin-bottom:4px}
        .status-indicator{display:inline-block;width:8px;height:8px;border-radius:50%;margin-right:6px}
        .status-playing{background:#4CAF50;animation:pulse 1s infinite}
        .status-paused{background:#ff9800}
        .status-stopped{background:#f44336}
        @keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}
        footer{text-align:center;margin-top:50px;padding:20px;opacity:.7;font-size:.9rem}
        .btn{background:#fdbb2d;color:#1a1a2e;border:none;padding:8px 16px;border-radius:50px;font-weight:bold;cursor:pointer;transition:all .3s;display:inline-flex;align-items:center;gap:6px;margin:4px;font-size:.85rem}
        .btn:hover{background:#ffcc44;transform:scale(1.05)}
        .btn-global{background:#4CAF50;padding:10px 20px;font-size:.95rem}
        .btn-global:hover{background:#66BB6A}
        .btn-stop{background:#f44336}
        .btn-stop:hover{background:#ef5350}
        @media(max-width:1400px){.video-container{grid-template-columns:repeat(2,1fr)}}
        @media(max-width:768px){.video-container{grid-template-columns:1fr}h1{font-size:2.2rem}}
        .abstract{background:rgba(255,255,255,.08);padding:20px;border-radius:10px;line-height:1.8;border-left:4px solid #fdbb2d;color:#fff;}
        .abstract strong{color:#fdbb2d;font-weight:600;}
        
                
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>AIC-RTVST</h1>
            <p class="subtitle">å®æ—¶è§†é¢‘è¯­ä¹‰ä¼ è¾“å¯¹æ¯”æ¼”ç¤ºå¹³å°</p>
        </header>

        <div class="global-controls">
            <div class="info-display-row">
                <div class="info-display-item"><span class="info-label">SNR:</span><span class="info-value">8 dB</span></div>
                <div class="info-display-item"><span class="info-label">CBR:</span><span class="info-value">0.012</span></div>
            </div>

            <!-- ========== æ‘˜è¦å—ï¼ˆæ–°å¢ï¼Œä½äºæ¶æ„å›¾ä¸Šæ–¹ï¼‰ ========== -->
            <div class="abstract" style="margin-bottom:20px;">
              <strong>é¡¹ç›®æ‘˜è¦ï¼š</strong>
              æœ¬ å›¢ é˜Ÿ æ å‡º äº† ä¸€ ç§ å® æ—¶ è§† é¢‘ è¯­ ä¹‰ ä¼  è¾“ ç³» ç»Ÿ ï¼ˆ Real-time Video Semantic 
                Transmissionï¼ŒRTVSTï¼‰ã€‚æå‡ºäº†éšå¼æ—¶æ€å»ºæ¨¡åŠè·¨é€šé“ä¿¡æ¯ç»“æ„åŒ–åˆ†è§£ä¸é‡æ„æ–¹æ³•ï¼Œå°†ä¼ ç»Ÿè¿åŠ¨ä¼°è®¡å’Œæ®‹å·®é“¾è·¯èåˆä¸ºç»Ÿä¸€çš„å‰å‘è¿‡ç¨‹ï¼Œ
                å¹¶åœ¨ç´§è‡´ç‰¹å¾ç©ºé—´ä¸­æ‰§è¡Œç‰¹å¾æå–æ“ä½œï¼Œä»è€Œå¤§å¹…é™ä½æ“ä½œå¤æ‚åº¦ï¼Œæ˜¾è‘—æå‡å•å¸§
                ç¼–è§£ç é€Ÿåº¦ã€‚æ­¤å¤–ï¼Œè¯¥ç®—æ³•é€šè¿‡ç«¯åˆ°ç«¯è”åˆä¼˜åŒ–ï¼Œä¿è¯é«˜è´¨é‡é‡å»ºæ•ˆæœçš„åŒæ—¶å…·æœ‰
                è¾ƒå¥½çš„å™ªå£°é²æ£’æ€§ã€‚RTVSTç›´å‡»è¯­ä¹‰è§†é¢‘ä¼ è¾“å®æ—¶æ€§ç—›ç‚¹ï¼Œæœ‰æœ›ä¸ºé«˜å¸¦å®½ã€ä½æ—¶å»¶
                çš„æœªæ¥æµåª’ä½“ä¸šåŠ¡æä¾›æ–¹æ³•æ”¯æ’‘ï¼Œæ¨åŠ¨è¯­ä¹‰é€šä¿¡ä»ç†è®ºç ”ç©¶èµ°å‘å®é™…éƒ¨ç½²ã€‚æœ¬ é¡¹ ç›®å°†DeepJSCCä¸H.265+1/3LDPC+16QAMä¼ ç»Ÿè§†é¢‘ä¼ è¾“ç³»
                ç»Ÿä½œä¸ºå¯¹æ¯”æ–¹æ¡ˆã€‚
            </div>

            
            <div class="architecture-image">
                <img src="https://rtvst-demo.github.io/video-transmission-demo/rtvst_Architecture.jpg " alt="RTVSTæ¶æ„å›¾">
                <div class="image-caption">RTVSTæ¨¡å‹æ¶æ„å›¾</div>
            </div>
            <div class="controls">
                <button class="btn btn-global" id="globalPlay"><i class="fas fa-play"></i> å¼€å§‹</button>
                <button class="btn btn-global" id="globalPause"><i class="fas fa-pause"></i> æš‚åœ</button>
                <button class="btn btn-global btn-stop" id="globalStop"><i class="fas fa-stop"></i> åœæ­¢</button>
            </div>
        </div>

        <div class="performance-charts">
            <div class="charts-title"><i class="fas fa-chart-line"></i> æ€§èƒ½æŒ‡æ ‡å¯¹æ¯”æ›²çº¿</div>
            <div class="charts-container">
                <div class="chart-item"><img src="https://rtvst-demo.github.io/video-transmission-demo/images_metrics/psnr.svg " alt="PSNR"><div class="chart-label">PSNRæ€§èƒ½å¯¹æ¯”</div></div>
                <div class="chart-item"><img src="https://rtvst-demo.github.io/video-transmission-demo/images_metrics/ssim.svg " alt="SSIM"><div class="chart-label">SSIMæ€§èƒ½å¯¹æ¯”</div></div>
                <div class="chart-item"><img src="https://rtvst-demo.github.io/video-transmission-demo/images_metrics/lpips.svg " alt="LPIPS"><div class="chart-label">LPIPSæ€§èƒ½å¯¹æ¯”</div></div>
            </div>
        </div>

        <div class="video-container">
            <!-- ====== Origin ====== -->
            <div class="video-panel">
                <div class="panel-header"><h3 class="panel-title"><i class="fas fa-film"></i> Origin</h3><span class="status-indicator status-stopped" id="st4"></span></div>
                <div class="display-area" id="da4"><!-- 100 å¸§å›ºå®šè·¯å¾„ --></div>
                <div class="info-panel">
                    <div class="info-item"><span>å¸§ç‡:</span><span id="fps4">25 FPS</span></div>
                    <div class="info-item"><span>çŠ¶æ€:</span><span id="ps4">å·²åœæ­¢</span></div>
                </div>
            </div>

            <!-- ====== H.265 + LDPC ====== -->
            <div class="video-panel">
                <div class="panel-header"><h3 class="panel-title"><i class="fas fa-film"></i> H.265 + LDPC</h3><span class="status-indicator status-stopped" id="st1"></span></div>
                <div class="display-area" id="da1"><!-- 100 å¸§å›ºå®šè·¯å¾„ --></div>
                <div class="info-panel">
                    <div class="info-item"><span>å¸§ç‡:</span><span id="fps1">25 FPS</span></div>
                    <div class="info-item"><span>çŠ¶æ€:</span><span id="ps1">å·²åœæ­¢</span></div>
                </div>
            </div>

            <!-- ====== DeepJSCC ====== -->
            <div class="video-panel">
                <div class="panel-header"><h3 class="panel-title"><i class="fas fa-film"></i> DeepJSCC</h3><span class="status-indicator status-stopped" id="st2"></span></div>
                <div class="display-area" id="da2"><!-- 100 å¸§å›ºå®šè·¯å¾„ --></div>
                <div class="info-panel">
                    <div class="info-item"><span>å¸§ç‡:</span><span id="fps2">4 FPS</span></div>
                    <div class="info-item"><span>çŠ¶æ€:</span><span id="ps2">å·²åœæ­¢</span></div>
                </div>
            </div>

            <!-- ====== RTVST ====== -->
            <div class="video-panel">
                <div class="panel-header"><h3 class="panel-title"><i class="fas fa-film"></i> RTVST</h3><span class="status-indicator status-stopped" id="st3"></span></div>
                <div class="display-area" id="da3"><!-- 100 å¸§å›ºå®šè·¯å¾„ --></div>
                <div class="info-panel">
                    <div class="info-item"><span>å¸§ç‡:</span><span id="fps3">25 FPS</span></div>
                    <div class="info-item"><span>çŠ¶æ€:</span><span id="ps3">å·²åœæ­¢</span></div>
                </div>
            </div>
        </div>

        <footer><p>å®æ—¶è§†é¢‘è¯­ä¹‰ä¼ è¾“ç®—æ³•è®¾è®¡</p></footer>
    </div>

    <!-- ====================== å›ºå®šè·¯å¾„ 100 å¸§ç”Ÿæˆè„šæœ¬ ====================== -->
    <script>
        /* ================= ç”Ÿæˆå››è·¯è§†é¢‘å¸§ ================= */
        const repo = 'https://rtvst-demo.github.io/video-transmission-demo';
    
        // Panelé…ç½®ä¿æŒä¸å˜ï¼Œä½†ä¸ºäº†ä»£ç æ¸…æ™°ï¼Œæˆ‘ä»¬å°†IDæ˜ å°„ä¸ºæ•°å­—
        const panelConfigs = [
            { id: 4, prefix: 'da4', folder: 'origin-frames', tpl: i => `img${String(i).padStart(6, '0')}.png`, count: 100, fps: 25 },
            { id: 1, prefix: 'da1', folder: 'h265+ldpc-frames', tpl: i => `output_${String(i).padStart(4, '0')}.png`, count: 100, fps: 25 },
            { id: 2, prefix: 'da2', folder: 'deepjscc-frames', tpl: i => `${100 + i - 1}recon_snr8.png`, count: 100, fps: 4 },
            { id: 3, prefix: 'da3', folder: 'rtvst-frames', tpl: i => `${i - 1}recon_snr8.png`, count: 100, fps: 25 }
        ];
    
        panelConfigs.forEach(p => {
            const box = document.getElementById(p.prefix);
            let html = '';
            for (let i = 1; i <= p.count; i++) {
                const fileName = p.tpl(i);
                const src = `${repo}/${p.folder}/${fileName}`;
                // æ‰€æœ‰å¸§éƒ½é¢„å…ˆåŠ è½½ï¼Œä½†åªæœ‰ç¬¬ä¸€å¸§é»˜è®¤æ˜¾ç¤º
                html += `<img id="${p.prefix}-frame-${i}" src="${src}" 
                         style="max-width:100%;max-height:100%;object-fit:contain;position:absolute;top:0;left:0;
                         ${i === 1 ? '' : 'display:none'}" />`;
            }
            // å…³é”®ï¼šå°† display-area è®¾ä¸º relativeï¼Œä½¿å­å…ƒç´  absolute å®šä½å åŠ 
            box.style.position = 'relative'; 
            box.innerHTML = html;
            box.style.border = '2px solid rgba(255, 255, 255, 0.2)';
        });
    
        /* ================= æ’­æ”¾å™¨ (æ— é—ªçƒä¼˜åŒ–) ================= */
        function flipper(prefix, total, interval, statusEl, curEl) {
            let idx = 0, t = null;
            let isWaitingForLoad = false;
            
            // ğŸš¨ æ ¸å¿ƒæ”¹åŠ¨ï¼šä½¿ç”¨å›¾ç‰‡åŠ è½½äº‹ä»¶æ¥ç¡®ä¿æ— é—ªçƒ
            const show = (k) => {
                const prevIndex = (k === 0 ? total : k) + 1; // æ—§å¸§ç´¢å¼• (k-1 å¾ªç¯åˆ° total)
                const targetIndex = k + 1; // æ–°å¸§ç´¢å¼•
                
                const prevTarget = document.getElementById(`${prefix}-frame-${prevIndex}`);
                const target = document.getElementById(`${prefix}-frame-${targetIndex}`);
    
                if (!target) return;
    
                if (target.complete) {
                    // 1. å¦‚æœæ–°å¸§å·²ç»åŠ è½½å®Œæˆ (complete)ï¼Œç›´æ¥æ˜¾ç¤ºæ–°å¸§ï¼Œéšè—æ—§å¸§
                    if (prevTarget) prevTarget.style.display = 'none';
                    target.style.display = 'block';
                    isWaitingForLoad = false;
                } else {
                    // 2. å¦‚æœæ–°å¸§å°šæœªåŠ è½½å®Œæˆï¼Œä¿æŒæ—§å¸§æ˜¾ç¤ºï¼Œå¹¶ç­‰å¾…æ–°å¸§åŠ è½½
                    isWaitingForLoad = true;
                    if (t) clearInterval(t); // æš‚åœè®¡æ—¶å™¨
    
                    console.warn(`Panel ${prefix}: Frame ${targetIndex} not ready. Pausing playback and waiting.`);
    
                    target.onload = () => {
                        // åŠ è½½å®Œæˆåï¼šæ˜¾ç¤ºæ–°å¸§ï¼Œéšè—æ—§å¸§ï¼Œå¹¶é‡å¯è®¡æ—¶å™¨
                        target.style.display = 'block';
                        if (prevTarget) prevTarget.style.display = 'none';
                        isWaitingForLoad = false;
    
                        console.log(`Panel ${prefix}: Frame ${targetIndex} loaded. Resuming playback.`);
    
                        if (statusEl) {
                            statusEl.textContent = 'æ’­æ”¾ä¸­';
                            statusEl.previousElementSibling.className = 'status-indicator status-playing';
                        }
                        // å¿…é¡»ä»è¿™é‡Œé‡å¯è®¡æ—¶å™¨ï¼Œä»¥ä¿æŒæ’­æ”¾çš„è¿è´¯æ€§
                        if (!t) {
                            t = setInterval(() => { idx = (idx + 1) % total; show(idx); }, interval);
                        }
                    };
                    // å¦‚æœå›¾ç‰‡åŠ è½½å¤±è´¥ï¼Œå®ƒå°†ä¿æŒåœ¨ç­‰å¾…çŠ¶æ€ï¼Œæˆ–ç»§ç»­æ˜¾ç¤ºæ—§å¸§
                }
                
                if (curEl) curEl.textContent = `${targetIndex} / ${total}`;
            };
    
            // åˆå§‹åŒ–ç‚¹äº®ç¬¬ä¸€å¼ 
            const initialShow = (k) => {
                document.querySelectorAll(`[id^="${prefix}-frame-"]`).forEach(el => el.style.display = 'none');
                const target = document.getElementById(`${prefix}-frame-${k + 1}`);
                if (target) target.style.display = 'block';
                if (curEl) curEl.textContent = `${k + 1} / ${total}`;
            }
            initialShow(0);
    
            return {
                start() {
                    if (t || isWaitingForLoad) return;
                    
                    // ç¡®ä¿ä»å½“å‰å¸§å¼€å§‹æ˜¾ç¤º
                    initialShow(idx); 
    
                    if (statusEl) {
                        statusEl.textContent = 'æ’­æ”¾ä¸­';
                        statusEl.previousElementSibling.className = 'status-indicator status-playing';
                    }
                    // å¯åŠ¨è®¡æ—¶å™¨ï¼Œè°ƒç”¨ç»è¿‡ä¿®æ”¹çš„ show å‡½æ•°
                    t = setInterval(() => { idx = (idx + 1) % total; show(idx); }, interval);
                },
                pause() {
                    clearInterval(t);
                    t = null;
                    isWaitingForLoad = false; // æš‚åœæ—¶ä¸åº”è¯¥å¤„äºç­‰å¾…çŠ¶æ€
                    if (statusEl) {
                        statusEl.textContent = 'å·²æš‚åœ';
                        statusEl.previousElementSibling.className = 'status-indicator status-paused';
                    }
                },
                stop() {
                    clearInterval(t);
                    t = null;
                    idx = 0;
                    isWaitingForLoad = false;
    
                    // åœæ­¢æ—¶ï¼Œç¡®ä¿åªæ˜¾ç¤ºç¬¬ä¸€å¸§ï¼Œä¸”å°†å…¶ä»–å¸§éšè—
                    document.querySelectorAll(`[id^="${prefix}-frame-"]`).forEach((el, i) => {
                        el.style.display = (i === 0) ? 'block' : 'none';
                    });
                    
                    if (curEl) curEl.textContent = `1 / ${total}`;
                    if (statusEl) {
                        statusEl.textContent = 'å·²åœæ­¢';
                        statusEl.previousElementSibling.className = 'status-indicator status-stopped';
                    }
                }
            };
        }
    
        /* ================= æ·»åŠ å¸§æ•°ä¿¡æ¯å…ƒç´  ================= */
        function addFrameInfoElement(panelId, totalCount) {
            const infoPanel = document.querySelector(`#da${panelId}`).nextElementSibling;
            const frameInfo = document.createElement('div');
            frameInfo.className = 'info-item';
            frameInfo.innerHTML = `<span>å½“å‰å¸§:</span><span id="cf${panelId}">1 / ${totalCount}</span>`;
            // æ’å…¥åˆ° FPS ä¸Šé¢
            infoPanel.insertBefore(frameInfo, infoPanel.firstChild); 
            return document.getElementById(`cf${panelId}`);
        }
    
        /* ================= å››è·¯å®ä¾‹ ================= */
        const players = panelConfigs.map(p => {
            const frameEl = addFrameInfoElement(p.id, p.count); 
            return flipper(
                p.prefix, 
                p.count, 
                1000 / p.fps,
                document.getElementById(`ps${p.id}`), // çŠ¶æ€æ–‡æœ¬å…ƒç´ 
                frameEl                             // å½“å‰å¸§/æ€»å¸§æ•°å…ƒç´ 
            );
        });
    
        /* ================= å…¨å±€æŒ‰é’® ================= */
        document.getElementById('globalPlay').addEventListener('click', () => players.forEach(p => p.start()));
        document.getElementById('globalPause').addEventListener('click', () => players.forEach(p => p.pause()));
        document.getElementById('globalStop').addEventListener('click', () => players.forEach(p => p.stop()));
    </script>

</body>
</html>
